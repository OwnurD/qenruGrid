!function(e,t,a){"use strict";function r(e){var t=new Date(parseInt(e.substr(6))),a=t.getMonth()+1+"";1==a.length&&(a="0"+a);var r=t.getDate()+"";1==r.length&&(r="0"+r);var n=r+"."+a+"."+t.getFullYear();return n}function n(e){for(var t=1;t<arguments.length;t++)e=e.replace(/%s/,arguments[t]);return e}var i={init:function(t,a){var r=this;r.totalRow=e(".qenruRow").length,r.el=a,r.$elem=e(a),r.options=e.extend({},e.fn.qenruGrid.options,r.$elem.data(),t),r.userOptions=t,r.setRowNumberOptions(),r.setGrid(),r.loadContent(),r.options.jsonDataRequest&&r.customEvents()},setRowNumberOptions:function(){var t=this,a="",r=999999999999==t.options.rowPerPage?"All":t.options.rowPerPage,i=999999999999==t.options.rowPerPage?-1:t.options.rowPerPage;a=n(t.templates().row_number_options_option,i,r);for(var o=0;o<t.options.rowNumberOptions.length;o++)if(t.options.rowNumberOptions[o]!=t.userOptions.rowPerPage){var s=-1==t.options.rowNumberOptions[o]?"All":t.options.rowNumberOptions[o];a+=n(t.templates().row_number_options_option,t.options.rowNumberOptions[o],s)}var d=n(t.templates().row_number_options_select,a);e(".qenruPageSwitcher").html(d)},updateCurrentPageId:function(){var t=this;t.current_page_id=void 0!==e(".qenruRow:visible").data("row-id")?e(".qenruRow:visible").data("row-id"):t.current_page_id},setGrid:function(){var e=this;null==e.options.dataSource?(e.headerDataSource=e.options.headerDataSource,e.rowDataSource=e.options.rowDataSource,null!=e.headDataSource&&e.setHeadData(),null!=e.rowDataSource&&e.setRowData()):(e.ajaxOptions=e.userOptions.dataSource,e.ajaxUrl=e.ajaxOptions.read,e.ajaxType=e.ajaxOptions.type,e.dataFields=e.ajaxOptions.dataFields,e.hiddenFields=e.ajaxOptions.hiddenFields,e.searchableFields=e.ajaxOptions.searchableFields,e.sortableFields=e.ajaxOptions.sortableFields,e.headerDataSource=e.ajaxOptions.headDataSource,e.getAjaxData(),e.setHeadData())},getAjaxData:function(){var t=this;e.ajax({type:"POST",url:t.ajaxUrl,data:"{}",dataType:t.ajaxType,contentType:"application/json",async:!1,beforeSend:function(){e(".qenruGridBody").append(t.templates().ajax_overlay)},success:function(a){var r=(new Array,a);t.rowDataSource=r.GetRowDataSource,t.setRowData(),e(".qenruGridBody").append(t.templates().ajax_overlay),setTimeout(function(){e(".gridOverlay").hide()},500)},error:function(e){console.log(e)}})},getDataOptions:function(e){var t="",a=1==e.is_hidden?1:-1,r=1==e.is_sortable?1:-1,n=e.is_searchable?1:-1;return-1!=a&&(t+="hidden|"),-1!=r&&(t+="sortable|"),-1!=n&&(t+="searchable|"),"|"==t.substr(t.length-1)&&(t=t.substring(0,t.length-1)),t=""==t?"":"data-option = '"+t+"'"},setHeadData:function(){var t=this,a=t.headerDataSource,r=a.dataFields,i="";e.each(r,function(e,a){if("#edit"!=a.index)var r=t.getDataOptions(a);i+=n(t.templates().head_column,r,a.name)}),e(".qenruGridHead").html(i)},setRowData:function(){var t=this,a="",r=t.headerDataSource,i=r.dataFields,o=t.rowDataSource;e.each(o,function(e,r){var o=t.getRowData(r,i);a+=n(t.templates().body_row,o)}),e(".qenruGridBody").html(a)},getRowData:function(t,a){var r=this,i="";return e.each(a,function(e,a){var o=a.is_hidden;if("#edit"==a.index)var s=t[a.data],d=void 0===a.text?"":a.text,l={success:!0,message:"",val:void 0===a.text?n(r.templates().edit_button,a.editUrl+s,"edit-icon"):n(r.templates().edit_button_text,a.editUrl+s,"edit-icon",d)};else var l=r.getFieldType(a.type,t[a.index]);l.success||(l.val="check console",console.log(l.message)),void 0!==a.appendAfter&&(l.val+=a.appendAfter),i+=1==o?n(r.templates().body_row_data_hidden,l.val):n(r.templates().body_row_data,l.val)}),i},getFieldType:function(e,t){if(null==t){var a={success:!1,message:"null value",val:""};return a}if(void 0!==e){switch(e){default:t=String(t);break;case"string":t=String(t);break;case"int":t=parseInt(t);break;case"date|json":t=r(t)}var a={success:!0,message:"",val:t};return a}var a={success:!1,message:e+"is not available in qenruGrid. Please check documentation to have all field type information",val:""};return a},loadContent:function(e,t){var a=this;a.setPage(),a.setGridWidth(),a.optionBuilder()},optionBuilder:function(){var t=this;t.$elem.find(".qenruCol").each(function(a){var r=e(this),n=t.getOption(r);if(""!=n)if(-1===n.indexOf("|"))t.optionSet(n,r);else{var i=n.split("|");t.optionSetByArray(i,r)}})},optionSetByArray:function(e,t){for(var a=this,r=e.length-1;r>=0;r--)a.optionSwitch(e[r],t)},optionSet:function(e,t){var a=this;a.optionSwitch(e,t)},optionSwitch:function(e,t){var a=this;switch(e){default:return 0;case"hidden":a.hideElement(t);break;case"sortable":a.makeSortable(t);break;case"searchable":a.makeSearchable(t)}},hideElement:function(e){var t=this;t.setStyle(e,"display","none")},makeSortable:function(e){var t=this;t.options.colSort&&e.addClass("sortable")},makeSearchable:function(e){var t=this,a=n(t.templates().inline_search,"Filtrele");t.options.colSearch&&(e.find(".qenruInlineSearch").remove(),e.append(a))},checkIfDataExist:function(t,a,r,n){var i=!1;return 1==n?t.each(function(){var t=e(this);t[0].attributes[a].value==r&&(i=!0)}):i=t[0].attributes[a].value==r?!0:!1,i},setGridWidth:function(){var e=this,t=e.options;if(t.headerColCount>0){if(null!=t.colCustomWidth){var a=0;e.makeGridWidth(t.colCustomWidth,t.widthType,!0)}}else{for(var r=0,a=e.headerDataSource.dataFields.length-1;a>=0;a--){var n=e.headerDataSource.dataFields[a];void 0!==n?1!=n.is_hidden&&"#edit"!=n.index&&r++:r++}var i=0;null!=t.colCustomWidth?e.makeGridWidth(t.colCustomWidth,t.widthType,!0):"px"!=t.widthType&&(i="#edit"==n.index?95/r:100/r,e.makeGridWidth(i,t.widthType,!1))}},makeGridWidth:function(t,a,r){var n=this;if(r){var i=0;n.$elem.find(".qenruGridHead .qenruCol").each(function(r){var o="#edit"==n.headerDataSource.dataFields[r].index?"5":t[i],s=e(this),d=n.getOption(s);return-1!==d.indexOf("hidden")?void n.setGridRow(r,o,a,!0):(n.setGridRow(r,o,a,!1),n.setStyle(s,"width",o+a),i++,void 0)})}else n.$elem.find(".qenruGridHead .qenruCol").each(function(r){var o="#edit"==n.headerDataSource.dataFields[r].index?"5":t,s=e(this),d=n.getOption(s);return-1!==d.indexOf("hidden")?void n.setGridRow(r,o,a,!0):(n.setGridRow(r,o,a,!1),n.setStyle(s,"width",o+a),i++,void 0)})},setGridRow:function(t,a,r,n){var i=this;i.$elem.find(".qenruGridBody .qenruRow").each(function(){var o=e(this);if(1==n){var s=o.find(".qenruRowData:eq("+t+")");i.setStyle(s,"display","none")}else{var s=o.find(".qenruRowData:eq("+t+")");i.setStyle(s,"width",a+r)}})},setStyle:function(e,t,a){e.css(t,a)},getOption:function(e){var t=e.attr("data-option");return"undefined"!=typeof t?t:""},reloadGrid:function(e,t){var a=this;if(void 0!==e){var r=e.prevAll().length;a.sortElements(r,t)}else a.loadContent()},sortElements:function(t,a){var r=e(".qenruRow"),n="asc"==a?"desc":"asc";r.sort(function(r,n){return r=e(r).find(".qenruRowData:eq("+t+")").html(),n=e(n).find(".qenruRowData:eq("+t+")").html(),"asc"==a?r>n?1:n>r?-1:0:r>n?-1:n>r?1:0}),e(".qenruGridBody").append(r),e(".qenruGridHead").find(".qenruCol:eq("+t+")").attr("data-orderby",n)},templates:function(){var e={prev_page:"<a href='%s' class='qenruPager %s'>&#x21d0;</a>",next_page:"<a href='%s' class='qenruPager %s'>&#8658;</a>",page_index:"<a href='%s' class='qenruPager %s'>%s</a>",row_number_options_select:"<select id='pageSwitcher'>%s</select>",row_number_options_option:"<option value='%s'>%s</option>",inline_search:"<input type='text' class='qenruInlineSearch' placeholder='%s'/>",head_column:"<div class='qenruCol' %s>%s</div>",body_row:"<div class='qenruRow'>%s</div>",body_row_data_hidden:"<div class='qenruRowData' style='display:none'>%s</div>",body_row_data:"<div class='qenruRowData'>%s</div>",sub_content:"<div class='subContent'>%s</div>",sub_content_head:"<div class='subHead'><div class='subHeadContainer'>%s</div></div>",sub_content_body:"<div class='subBody'><div class='subBodyContainer'>%s</div></div>",sub_content_body_row:"<div class='subBodyRow'>%s</div>",sub_content_body_row_data:"<div class='subBodyRowData'>%s</div>",ajax_overlay:"<div class='gridOverlay'><div class='box loading'></div></div>",edit_button:"<a href='%s' class='editButton %s'></a>",edit_button_text:"<a href='%s' class='editButtonText %s'>%s</a>",editable_select_element:"<select name='%s' id='%s' class='qenruEditableElement editableSelect'>%s</select>",editable_select_option_element:"<option value='%s'>%s</option>",editable_input_text_element:"<input type='text' name='%s' class='qenruEditableElement editableText' value='%s'/>",editable_input_radio_element:"<label for='%s'>%s</label><input type='radio' name='%s' id='%s' class='qenruEditableElement editableRadio'/>",editable_input_checkbox_element:"<label for='%s'>%s</label><input type='checkbox' name='%s' id='%s' class='qenruEditableElement editableCheckbox'/>",editable_textarea_element:"<textarea name='%s' class='qenruEditableElement editableTextarea'>%s</textarea>"};return e},customEvents:function(){var t=this;t.$elem.on("qenru.sort",function(a){var r=e(a.target);t.sortData(r)}),t.$elem.on("qenru.pager",function(a){var r=e(a.target);t.pageData(r)}),t.$elem.on("qenru.rowPerPage",function(a){var r=e(a.target);t.rowsPerPage(r)}),t.$elem.on("qenru.inline-search",function(a){var r=e(a.target);t.options.colSearch&&t.inlineSearch(r)})},rowsPerPage:function(e){var t=this;t.options.jsonDataRequest=!1;var a=e.val();t.options.rowPerPage=a>0?a:999999999999,t.init(t.options,t.el)},makePager:function(t){var a=this;t=void 0===t?a.current_page_id:t,a.totalRow=e(".qenruRow").length,a.totalPage=a.totalRow%a.options.rowPerPage==0?a.totalRow/a.options.rowPerPage:parseInt(a.totalRow/a.options.rowPerPage)+1;var r=parseInt(t)+1>a.totalPage?n(a.templates().next_page,"javascript:void(0)","active"):n(a.templates().next_page,"#next",""),i=parseInt(t)-1<1?n(a.templates().prev_page,"javascript:void(0)","active"):n(a.templates().prev_page,"#prev",""),o=i,s=t;o+=a.setPager(s),o+=r,e(".qenruGridFooter").html(o),e(".qenruPager").on("click",function(){e(this).trigger("qenru.pager")})},setPager:function(e){e=parseInt(e);var t,a,r=this,i=r.options.totalPageButton,o="",s="",d=r.totalPage,l="";(i-1)%2==0?t=a=(i-1)/2:(t=(i-1)/2+.5,a=(i-1)/2-.5);for(var u=0,c=0,p=0>=e-1-a?1:e-1-a,v=p;e-1>=v&&!(u>a);v++)o+=n(r.templates().page_index,"#"+v,"",v),u++;l+=o;var h=n(r.templates().page_index,"javascript:void(0)","active",e);l+=h;for(var v=e+1;d>=v&&!(c>t);v++)s+=n(r.templates().page_index,"#"+v,"",v),c++;return l+=s},setPage:function(){var t=this,a=1;e(".qenruRow:visible").each(function(r){var n=e(this);(r+1)%t.options.rowPerPage==0?(n.attr("data-row-id",a),a++):n.attr("data-row-id",a)}),t.shapePage()},shapePage:function(t){var a=this;if(a.updateCurrentPageId(),"next"==t){var r=a.checkIfDataExist(e(".qenruRow"),"data-row-id",parseInt(a.current_page_id,10)+1,!0);t=r?parseInt(a.current_page_id,10)+1:-1}else if("prev"==t){var r=a.checkIfDataExist(e(".qenruRow"),"data-row-id",parseInt(a.current_page_id,10)-1,!0);t=r?parseInt(a.current_page_id,10)-1:-1}a.current_page_id<0||e(".qenruRow").each(function(){var r=e(this),n=r.attr("data-row-id");void 0!==t?n!=t?a.setStyle(r,"display","none"):a.setStyle(r,"display","table"):r.is(":visible")&&(n!=a.current_page_id?a.setStyle(r,"display","none"):a.setStyle(r,"display","table"))}),a.makePager(t)},inlineSearch:function(t){var a=this;a.updateCurrentPageId();var r=t.parent().prevAll().length,n=t.val().toLowerCase();e(".qenruRow").each(function(t,i){var o=e(this),s=o.attr("data-row-id");if(a.current_page_id==s){var d=o.find(".qenruRowData:eq("+r+")"),l=d.text().toLowerCase();o.toggle(l.indexOf(n)>=0)}}),a.shapePage()},pageData:function(e){var t=this;if(0==e.hasClass("active")){var a=e.attr("href").split("#")[1];t.shapePage(a)}},sortData:function(t){var a=this,r=t.attr("data-orderby");e(".sortable").removeClass("order-down").removeClass("order-up"),void 0===r?(r="asc",t.removeClass("order-down").addClass("order-up")):"asc"==r?t.removeClass("order-down").addClass("order-up"):t.removeClass("order-up").addClass("order-down"),r=void 0===r?"asc":r,a.reloadGrid(t,r)}};e.fn.qenruGrid=function(t){return this.each(function(){var a=Object.create(i);a.init(t,this),e.data(this,"qenruGrid",a)})},e.fn.qenruGrid.options={editable:!1,headerColCount:0,widthType:"%",colCustomWidth:null,search:!0,responsive:!0,rowPerPage:10,totalPageButton:5,colSearch:!1,headerDataSource:null,rowDataSource:null,colSort:!1,dataSource:null,rowNumberOptions:[5,10,25,50,-1],jsonDataRequest:!0},String.prototype.rtrim=function(e){return this.replace(new RegExp(e+"/*$"),"")}}(jQuery,window,document);